<% backdating_status = capture do %>
  <% if @edition.backdated_to.present? %>
    <% format_date(@edition.backdated_to) %>
  <% else %>
    <% t("documents.show.content_settings.backdate.no_backdate") %>
  <% end %>
<% end %>

<% access_limit = capture do %>
  <% if @edition.access_limit.present? %>
    <% t("documents.show.content_settings.access_limit.type.#{@edition.access_limit.limit_type}") %>
  <% else %>
    <% t("documents.show.content_settings.access_limit.no_access_limit") %>
  <% end %>
<% end %>

<% items = [
  {
    field: t("documents.show.content_settings.access_limit.title"),
    value: access_limit,
    edit: {
      href: access_limit_path,
      data_attributes: { gtm: "edit-access-limit" }
    }
  }
] %>

<% if @edition.first? %>
  <% items << {
    field: t("documents.show.content_settings.backdate.title"),
    value: backdating_status,
    edit: {
      href: backdate_path,
      data_attributes: { gtm: "edit-backdate" }
    }
  } %>
<% end %>

<% if current_user.has_permission?(User::PRE_RELEASE_FEATURES_PERMISSION) %>
  <% items << {
    field: t("documents.show.content_settings.political.title"),
    value: @edition.political? ? t("documents.show.content_settings.political.true_label") : t("documents.show.content_settings.political.false_label"),
    edit: {
      href: political_path,
      data_attributes: { gtm: "edit-political" }
    }
  } %>
<% end %>

<%= render "govuk_publishing_components/components/summary_list", {
  id: "content_settings",
  title: t("documents.show.content_settings.title"),
  borderless: true,
  items: items
} %>
