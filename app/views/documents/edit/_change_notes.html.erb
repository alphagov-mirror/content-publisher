<% textarea = capture do %>
    <%= render "govuk_publishing_components/components/textarea", {
      label: {
        text: t("documents.edit.change_note.title"),
      },
      id: "revision-change-note",
      name: "revision[change_note]",
      value: @revision.change_note,
      rows: 4,
      data: {
        "contextual-guidance": "change-note-guidance"
      }
    } %>
<% end %>

<%= render "govuk_publishing_components/components/contextual_guidance", {
  id: "change-note",
  html_for: "revision-change-note",
  title: t("documents.edit.change_note.guidance_title"),
  content: render_govspeak(t("documents.edit.change_note.guidance"))
} do %>
  <%= render "govuk_publishing_components/components/radio", {
    name: "revision[update_type]",
    heading: t("documents.edit.update_type.title"),
    heading_size: "s",
    items: [
      {
        value: "major",
        text: t("documents.edit.update_type.major_name"),
        conditional: textarea,
        checked: @revision.major?,
        data_attributes: {
          gtm: "choose-update-type",
          "gtm-value": t("documents.edit.update_type.major_name")
        }
      },
      {
        value: "minor",
        text: t("documents.edit.update_type.minor_name"),
        checked: @revision.minor?,
        data_attributes: {
          gtm: "choose-update-type",
          "gtm-value": t("documents.edit.update_type.minor_name")
        }
      }
    ]
  } %>
<% end %>
